(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{372:function(e,a,t){Promise.resolve().then(t.bind(t,9905))},9905:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return N}});var c=t(7437),n=t(4634),i=t(1991),l=t(2575),s=t.n(l),r=t(2265);let o="https://store.istad.co/api/products/",m="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzE0NTU1NzQxLCJpYXQiOjE3MTIzOTU3NDEsImp0aSI6IjNiMzE0ODg1NjQ0MzRjYmRhYzY0OTI0Njg4Nzc1NDRjIiwidXNlcl9pZCI6Njl9.gdWxFExnIngfBP3Om54HnNlHLoSrmbkMhxfHHNGgiEU",d={categoryName:"",categoryIcon:"",name:"",desc:"",image:"",price:0,quantity:0,fileIcon:null,fileProduct:null},u=["image/jpg","image/jpeg","image/png","image/gif"],p=i.Ry().shape({categoryName:i.Z_().required("Required"),name:i.Z_().required("Required"),desc:i.Z_().nullable(),price:i.Rx().required("Required"),quantity:i.Rx().required("Required"),fileIcon:i.nK().test("fileFormat","Unsupported Format",e=>!e||u.includes(e.type)).test("fileSize","File Size is too large",e=>e.size<=2097152).required("Required"),fileProduct:i.nK().test("fileFormat","Unsupported Format",e=>!e||u.includes(e.type)).test("fileSize","File Size is too large",e=>e.size<=2097152).required("Required")});function N(){let e=async(e,a,t)=>{let c=new FormData;c.append("name",a),c.append("image",e);let n=await fetch("".concat(o,"/api/file/").concat(t,"/"),{method:"POST",headers:{Authorization:"Bearer ".concat(m)},body:c});return(await n.json()).image},a=async e=>{let a=await fetch("".concat(o,"/api/products/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m)},body:JSON.stringify(e)});console.log("product uploade: ",await a.json())};return(0,c.jsx)("main",{className:"".concat(s().container),children:(0,c.jsx)(n.J9,{initialValues:d,validationSchema:p,onSubmit:async t=>{let c=t.fileIcon,n=await e(c,t.categoryName,"category"),i=t.fileProduct,l=await e(i,t.name,"product");a({category:{name:t.categoryName,icon:n},name:t.name,desc:t.desc,image:l,price:t.price,quantity:t.quantity})},children:e=>{let{setFieldValue:a}=e;return(0,c.jsxs)(n.l0,{className:"bg-gray-100 p-4 rounded-lg w-96",children:[(0,c.jsx)("h1",{className:"".concat(s().title),children:"Create Product"}),(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("label",{className:"".concat(s().label),htmlFor:"name",children:"Product Name"}),(0,c.jsx)(n.gN,{type:"text",name:"name",id:"name",className:"".concat(s().input)}),(0,c.jsx)(n.Bc,{name:"name",component:"div",className:"".concat(s().error)})]}),(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("label",{className:"".concat(s().label),htmlFor:"desc",children:"Product Description"}),(0,c.jsx)(n.gN,{type:"text",name:"desc",id:"desc",component:"textarea",className:"".concat(s().input)}),(0,c.jsx)(n.Bc,{name:"desc",component:"div",className:"".concat(s().error)})]}),(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("label",{className:"".concat(s().label),htmlFor:"price",children:"Product Price"}),(0,c.jsx)(n.gN,{type:"number",name:"price",id:"price",className:"".concat(s().input)}),(0,c.jsx)(n.Bc,{name:"price",component:"div",className:"".concat(s().error)})]}),(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("label",{className:"".concat(s().label),htmlFor:"price",children:"Product Quantity"}),(0,c.jsx)(n.gN,{type:"number",name:"quantity",id:"quantity",className:"".concat(s().input)}),(0,c.jsx)(n.Bc,{name:"quantity",component:"div",className:"".concat(s().error)})]}),(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("label",{className:"".concat(s().label),htmlFor:"categoryName",children:"Product Category Name"}),(0,c.jsx)(n.gN,{type:"text",name:"categoryName",id:"categoryName",className:"".concat(s().input)}),(0,c.jsx)(n.Bc,{name:"categoryName",component:"div",className:"".concat(s().error)})]}),(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("label",{className:"".concat(s().label),htmlFor:"categoryIcon",children:"Product Category Icon"}),(0,c.jsx)(n.gN,{type:"file",name:"fileIcon",id:"fileIcon",component:y,setFieldValue:a,className:"".concat(s().input)}),(0,c.jsx)(n.Bc,{name:"fileIcon",component:"div",className:"".concat(s().error)})]}),(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("label",{className:"".concat(s().label),htmlFor:"fileProduct",children:"Product Image"}),(0,c.jsx)(n.gN,{type:"file",name:"fileProduct",id:"fileProduct",component:y,setFieldValue:a,className:"".concat(s().input)}),(0,c.jsx)(n.Bc,{name:"fileProduct",component:"div",className:"".concat(s().error)})]}),(0,c.jsx)("button",{type:"submit",className:"".concat(s().button),children:"Submit"})]})}})})}let y=e=>{let{field:a,form:t,setFieldValue:n}=e,[i,l]=(0,r.useState)(""),s=e=>{let t=e.target.files[0],c=URL.createObjectURL(t);console.log(c),l(c),n(a.name,t)};return(0,c.jsxs)("div",{children:[(0,c.jsx)("input",{onChange:e=>s(e),type:"file"}),i&&(0,c.jsx)("img",{src:i,alt:"preview"})]})}},2575:function(e){e.exports={container:"style_container__6AHXI",title:"style_title__syJaw",dark:"style_dark__fk6vZ",label:"style_label__doAQo",input:"style_input__7_GWW",form:"style_form__RrSQk",error:"style_error___5Q2A",button:"style_button__xxsrx"}}},function(e){e.O(0,[236,971,69,744],function(){return e(e.s=372)}),_N_E=e.O()}]);